<!DOCTYPE html> <html> <head> <meta charset=utf-8 /> <meta content="IE=edge;chrome=1" http-equiv=X-UA-Compatible /> <title> Manage your dotfiles with ease - Gee Bee </title> <link href="/stylesheets/all.css" rel=stylesheet /> <script src="/javascripts/all.js"></script> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> </head> <body> <nav class="navbar navbar-default" role=navigation><div class=container><div class=navbar-header><div class=navbar-brand href="#"><a href="/">Gee Bee</a></div></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li></ul></div></div></nav> <div class=container> <div id=main role=main> <article><h2>Manage your dotfiles with ease</h2><p>There are are two main steps required to easily manage dotfiles (between machines or installations):</p> <ol> <li>Keeping it in sync beetween computers with git repository</li> <li>Having script which takes care of linking files in dotfiles repo folder to their proper locations in the system.</li> </ol> <p>While setting git repo for our dotfiles is simple, writing a linking script isn't so obvious.</p> <p>Usually adding new files to dotfile folder imply modifying a script which makes it hard to manage over time as it grows. My idea was to write a self-managable dotfile repo, which structure mirror the file structure on the local OS (repo has one <code>home</code> folder). Additionally I decided to link only files, not directories, because you may want to have some files in shared dotfiles folder only on one local machine.</p> <p>In result you don't have to change a script when you add new dotfiles as long as you keep file hierarchy in a repo the same as in the system. Look at the source:</p> <pre><code class="highlight ruby"><span class="c1">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s1">'fileutils'</span>
<span class="nb">require</span> <span class="s1">'pathname'</span>

<span class="c1"># Recursively link files from source to target directory</span>
<span class="k">def</span> <span class="nf">linkify</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">target_path</span>
  <span class="no">Dir</span><span class="p">.</span><span class="nf">glob</span><span class="p">(</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="s1">'*'</span><span class="p">),</span> <span class="no">File</span><span class="o">::</span><span class="no">FNM_DOTMATCH</span> <span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">src_fn_path</span><span class="o">|</span>
    <span class="n">src_pn</span> <span class="o">=</span> <span class="no">Pathname</span><span class="p">.</span><span class="nf">new</span> <span class="n">src_fn_path</span>
    <span class="k">next</span> <span class="k">if</span> <span class="sx">%w(. ..)</span><span class="p">.</span><span class="nf">include?</span> <span class="n">src_pn</span><span class="p">.</span><span class="nf">basename</span><span class="p">.</span><span class="nf">to_s</span>
    <span class="k">if</span> <span class="n">src_pn</span><span class="p">.</span><span class="nf">directory?</span>
      <span class="no">FileUtils</span><span class="p">.</span><span class="nf">mkdir_p</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">target_path</span><span class="p">,</span> <span class="n">src_pn</span><span class="p">.</span><span class="nf">basename</span><span class="p">)</span>
      <span class="n">linkify</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">src_pn</span><span class="p">.</span><span class="nf">basename</span><span class="p">),</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">target_path</span><span class="p">,</span> <span class="n">src_pn</span><span class="p">.</span><span class="nf">basename</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="no">FileUtils</span><span class="p">.</span><span class="nf">ln_s</span> <span class="n">src_pn</span><span class="p">,</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">target_path</span><span class="p">,</span> <span class="n">src_pn</span><span class="p">.</span><span class="nf">basename</span><span class="p">),</span> <span class="ss">force: </span><span class="kp">true</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="n">linkify</span> <span class="no">File</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="kp">__FILE__</span><span class="p">)),</span> <span class="s1">'home'</span> <span class="p">),</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'HOME'</span><span class="p">]</span>
</code></pre> <p>Whenever you add new dotfiles to your repo , just run this script and you're good to go.</p> <p>Here is <a href="https://github.com/Gee-Bee/dotfiles">my dotfiles repo</a>.</p> </article><h3>Comments</h3><div id=disqus_thread></div> <script>
            //<![CDATA[
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//gee-bee-development.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            //]]>
            </script> <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="//disqus.com" class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </script> </div> </div> </body> </html>